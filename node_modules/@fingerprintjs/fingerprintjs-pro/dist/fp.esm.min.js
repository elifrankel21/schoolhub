/**
 * FingerprintJS Pro v3.8.1 - Copyright (c) FingerprintJS, Inc, 2022 (https://fingerprint.com)
 *
 * This software contains code from open-source projects:
 * MurmurHash3 by Karan Lyons (https://github.com/karanlyons/murmurHash3.js)
 */

import{__spreadArrays as e,__rest as t,__assign as r}from"tslib";function n(e,t){return function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(e,t)?e[t]:void 0}function o(e){for(var t="",r=0;r<e.length;++r)if(r>0){var n=e[r].toLowerCase();n!==e[r]?t+=" "+n:t+=e[r]}else t+=e[r].toUpperCase();return t}var i={default:"endpoint"},u={default:"tlsEndpoint"},a="Client timeout",R="Network connection error",c="Network request aborted",d="Response cannot be parsed",s="Blocked by CSP",l=/*#__PURE__*/o("WrongRegion"),f=/*#__PURE__*/o("SubscriptionNotActive"),E=/*#__PURE__*/o("UnsupportedVersion"),p=/*#__PURE__*/o("InstallationMethodRestricted"),_=/*#__PURE__*/o("HostnameRestricted"),O=/*#__PURE__*/o("IntegrationFailed"),I="API key required",v="API key not found",h="API key expired",N="Request cannot be parsed",P="Request failed",A="Request failed to process",T="Too many requests, rate limit exceeded",y="Not available for this origin",m="Not available with restricted header",w="API key required",S="API key not found",k="API key expired";function b(t,r){var n=[];return function(t,r){var n=5,o=(d=t,s=e(d),{current:function(){return s[0]},postpone:function(){var e=s.shift();void 0!==e&&s.push(e)},exclude:function(){s.shift()}}),i=(a=100,R=3e3,c=0,function(){return Math.random()*Math.min(R,a*Math.pow(2,c++))}),u=o.current();var a,R,c;var d,s;if(void 0===u)return Promise.reject(new TypeError("The list of script URL patterns is empty"));var l=function(e,t){return r(e).catch((function(e){if(t+1>=n)throw e;!function(e){if(!(e instanceof Error))return!1;var t=e.message;return"Blocked by CSP"===t||"9319"===t}(e)?o.postpone():o.exclude();var r,u=o.current();if(void 0===u)throw e;return(r=i(),new Promise((function(e){return setTimeout(e,r)}))).then((function(){return l(u,t+1)}))}))};return l(u,0)}(t,(function(e){var t=new Date,o=function(){return n.push({url:e,startedAt:t,finishedAt:new Date})},i=r(e);return i.then(o,o),i})).then((function(e){return[e,{attempts:n}]}))}var D="https://fpnpmcdn.net/v<version>/<apiKey>/loader_v<loaderVersion>.js",C=D,U="Failed to load the JS script of the agent";function g(e){var o;e.scriptUrlPattern;var i=e.token,u=e.apiKey,a=void 0===u?i:u,R=t(e,["scriptUrlPattern","token","apiKey"]),c=null!==(o=n(e,"scriptUrlPattern"))&&void 0!==o?o:D;return Promise.resolve().then((function(){if(!a||"string"!=typeof a)throw new Error("API key required");return b(function(e,t){return(Array.isArray(e)?e:[e]).map((function(e){return function(e,t){var r=encodeURIComponent;return e.replace(/<[^<>]+>/g,(function(e){return"<version>"===e?"3":"<apiKey>"===e?r(t):"<loaderVersion>"===e?r("3.8.1"):e}))}(String(e),t)}))}(c,a),L).catch(B)})).then((function(e){var t=e[0],n=e[1];return t.load(r(r({},R),{ldi:n}))}))}function L(e){return function(e,t,r,n){var o,i=document,u="securitypolicyviolation",a=function(t){var r=new URL(e,location.href),n=t.blockedURI;n!==r.href&&n!==r.protocol.slice(0,-1)&&n!==r.origin||(o=t,R())};i.addEventListener(u,a);var R=function(){return i.removeEventListener(u,a)};return null==n||n.then(R,R),Promise.resolve().then(t).then((function(e){return R(),e}),(function(e){return new Promise((function(e){return setTimeout(e)})).then((function(){if(R(),o)return r(o);throw e}))}))}(e,(function(){return function(e){return new Promise((function(t,r){var n=document.createElement("script"),o=function(){var e;return null===(e=n.parentNode)||void 0===e?void 0:e.removeChild(n)},i=document.head||document.getElementsByTagName("head")[0];n.onload=function(){o(),t()},n.onerror=function(){o(),r(new Error(U))},n.async=!0,n.src=e,i.appendChild(n)}))}(e)}),(function(){throw new Error("Blocked by CSP")})).then(q)}function q(){var e=window,t="__fpjs_p_l_b",r=e[t];if(function(e,t){var r,n=null===(r=Object.getOwnPropertyDescriptor)||void 0===r?void 0:r.call(Object,e,t);(null==n?void 0:n.configurable)?delete e[t]:n&&!n.writable||(e[t]=void 0)}(e,t),"function"!=typeof(null==r?void 0:r.load))throw new Error("9319");return r}function B(e){throw e instanceof Error&&"9319"===e.message?new Error(U):e}var K={load:g,defaultScriptUrlPattern:C,ERROR_SCRIPT_LOAD_FAIL:U,ERROR_API_KEY_EXPIRED:"API key expired",ERROR_API_KEY_INVALID:"API key not found",ERROR_API_KEY_MISSING:"API key required",ERROR_BAD_REQUEST_FORMAT:"Request cannot be parsed",ERROR_BAD_RESPONSE_FORMAT:"Response cannot be parsed",ERROR_CLIENT_TIMEOUT:"Client timeout",ERROR_CSP_BLOCK:"Blocked by CSP",ERROR_FORBIDDEN_ENDPOINT:_,ERROR_FORBIDDEN_HEADER:"Not available with restricted header",ERROR_FORBIDDEN_ORIGIN:"Not available for this origin",ERROR_GENERAL_SERVER_FAILURE:"Request failed",ERROR_INSTALLATION_METHOD_RESTRICTED:p,ERROR_INTEGRATION_FAILURE:O,ERROR_NETWORK_ABORT:"Network request aborted",ERROR_NETWORK_CONNECTION:"Network connection error",ERROR_RATE_LIMIT:"Too many requests, rate limit exceeded",ERROR_SERVER_TIMEOUT:"Request failed to process",ERROR_SUBSCRIPTION_NOT_ACTIVE:f,ERROR_TOKEN_EXPIRED:"API key expired",ERROR_TOKEN_INVALID:"API key not found",ERROR_TOKEN_MISSING:"API key required",ERROR_UNSUPPORTED_VERSION:E,ERROR_WRONG_REGION:l,defaultEndpoint:i,defaultTlsEndpoint:u};export{h as ERROR_API_KEY_EXPIRED,v as ERROR_API_KEY_INVALID,I as ERROR_API_KEY_MISSING,N as ERROR_BAD_REQUEST_FORMAT,d as ERROR_BAD_RESPONSE_FORMAT,a as ERROR_CLIENT_TIMEOUT,s as ERROR_CSP_BLOCK,_ as ERROR_FORBIDDEN_ENDPOINT,m as ERROR_FORBIDDEN_HEADER,y as ERROR_FORBIDDEN_ORIGIN,P as ERROR_GENERAL_SERVER_FAILURE,p as ERROR_INSTALLATION_METHOD_RESTRICTED,O as ERROR_INTEGRATION_FAILURE,c as ERROR_NETWORK_ABORT,R as ERROR_NETWORK_CONNECTION,T as ERROR_RATE_LIMIT,U as ERROR_SCRIPT_LOAD_FAIL,A as ERROR_SERVER_TIMEOUT,f as ERROR_SUBSCRIPTION_NOT_ACTIVE,k as ERROR_TOKEN_EXPIRED,S as ERROR_TOKEN_INVALID,w as ERROR_TOKEN_MISSING,E as ERROR_UNSUPPORTED_VERSION,l as ERROR_WRONG_REGION,K as default,i as defaultEndpoint,C as defaultScriptUrlPattern,u as defaultTlsEndpoint,g as load};
